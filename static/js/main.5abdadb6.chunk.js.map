{"version":3,"sources":["components/Login/Login.module.css","components/UI/Input/Input.module.css","components/UI/Card/Card.module.css","components/UI/Button/Button.module.css","components/Home/Home.module.css","components/MainHeader/Navigation.module.css","components/MainHeader/MainHeader.module.css","store/auth-context.js","components/UI/Card/Card.js","components/UI/Button/Button.js","components/UI/Input/Input.js","components/Login/Login.js","components/Home/Home.js","components/MainHeader/Navigation.js","components/MainHeader/MainHeader.js","App.js","index.js"],"names":["module","exports","AuthContext","React","createContext","isLoggedIn","onLogout","onLogin","email","password","AuthContextProvider","props","useState","setIsLoggedIn","useEffect","localStorage","getItem","Provider","value","removeItem","setItem","children","Card","className","classes","card","Button","type","button","onClick","disabled","Input","forwardRef","ref","inputRef","useRef","activate","current","focus","useImperativeHandle","control","isValid","invalid","htmlFor","id","label","onChange","onBlur","emailReducer","state","action","val","includes","passwordReducer","trim","length","Login","formIsValid","setFormIsValid","useReducer","emailState","dispatchEmail","passwordState","dispatchPassword","emailIsValid","passwordIsValid","authCtx","useContext","emailInputRef","passwordInputRef","identifier","setTimeout","console","log","clearTimeout","login","onSubmit","event","preventDefault","target","actions","btn","Home","home","Navigation","ctx","nav","href","MainHeader","App","Fragment","ReactDOM","createRoot","document","getElementById","render"],"mappings":"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","file":"static/js/main.5abdadb6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__3_gC4\",\"actions\":\"Login_actions__2DNm8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"control\":\"Input_control__35RiZ\",\"invalid\":\"Input_invalid__2PnX6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__3Wyve\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2J4KW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__2iUHU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navigation_nav__3spo0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main-header\":\"MainHeader_main-header__1E32p\"};","import React, { useState, useEffect } from \"react\";\r\n\r\nconst AuthContext = React.createContext({\r\n  isLoggedIn: false,\r\n  onLogout: () => {}, //adding empty func just for IDE purposes, then IDE offers onLogout in Navigation.js, real working onLogout is added in App.js\r\n  onLogin: (email, password) => {}, //dummy function, we are not doing anything with the data in braces, but technically we would need it in a real app\r\n});\r\n\r\nexport const AuthContextProvider = (props) => {\r\n  const [isLoggedIn, setIsLoggedIn] = useState();\r\n\r\n  useEffect(() => {\r\n    const storedUserLoggedInInformation = localStorage.getItem(\"isLoggedIn\");\r\n\r\n    if (storedUserLoggedInInformation === \"True\") {\r\n      setIsLoggedIn(true);\r\n    }\r\n  }, []);\r\n\r\n  const logoutHandler = () => {\r\n    localStorage.removeItem(\"isLoggedIn\");\r\n    setIsLoggedIn(false);\r\n  };\r\n  const loginHandler = () => {\r\n    localStorage.setItem(\"isLoggedIn\", \"True\");\r\n    setIsLoggedIn(true);\r\n  };\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        isLoggedIn: isLoggedIn,\r\n        onLogout: logoutHandler,\r\n        onLogin: loginHandler,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContext;\r\n","import React from 'react';\n\nimport classes from './Card.module.css';\n\nconst Card = (props) => {\n  return (\n    <div className={`${classes.card} ${props.className}`}>{props.children}</div>\n  );\n};\n\nexport default Card;\n","import React from 'react';\n\nimport classes from './Button.module.css';\n\nconst Button = (props) => {\n  return (\n    <button\n      type={props.type || 'button'}\n      className={`${classes.button} ${props.className}`}\n      onClick={props.onClick}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </button>\n  );\n};\n\nexport default Button;\n","import React, { useRef, useImperativeHandle } from \"react\";\r\nimport classes from \"./Input.module.css\";\r\n\r\nconst Input = React.forwardRef((props, ref) => {\r\n  const inputRef = useRef();\r\n\r\n  const activate = () => {\r\n    inputRef.current.focus();\r\n  };\r\n\r\n  // in Login.js Input component will be able to use only what is within useImperativeHande\r\n  // it should be avoided, but in this case with focusing is useful\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      focus: activate, //focus is just name used, it is pointing to activate function\r\n    };\r\n  });\r\n  return (\r\n    <div\r\n      className={`${classes.control} ${\r\n        props.isValid === false ? classes.invalid : \"\"\r\n      }`}\r\n    >\r\n      <label htmlFor={props.id}>{props.label}</label>\r\n      <input\r\n        ref={inputRef}\r\n        type={props.type}\r\n        id={props.id}\r\n        value={props.value}\r\n        onChange={props.onChange}\r\n        onBlur={props.onBlur}\r\n      />\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Input;\r\n","import React, {\n  useState,\n  useEffect,\n  useReducer,\n  useContext,\n  useRef,\n} from \"react\";\n\nimport Card from \"../UI/Card/Card\";\nimport classes from \"./Login.module.css\";\nimport Button from \"../UI/Button/Button\";\nimport AuthContext from \"../../store/auth-context\";\nimport Input from \"../UI/Input/Input\";\n\nconst emailReducer = (state, action) => {\n  if (action.type === \"USER_INPUT\") {\n    return { value: action.val, isValid: action.val.includes(\"@\") };\n  }\n  if (action.type === \"INPUT_BLUR\") {\n    // using last snapshot of a state as a value\n    return { value: state.value, isValid: state.value.includes(\"@\") };\n  }\n  return { value: \"\", isValid: false };\n};\n\nconst passwordReducer = (state, action) => {\n  if (action.type === \"USER_INPUT\") {\n    return { value: action.val, isValid: action.val.trim().length > 6 };\n  }\n  if (action.type === \"INPUT_BLUR\") {\n    // using last snapshot of a state as a value\n    return { value: state.value, isValid: state.value.trim().length > 6 };\n  }\n  return { value: \"\", isValid: false };\n};\n\nconst Login = (props) => {\n  // const [enteredEmail, setEnteredEmail] = useState(\"\");\n  // const [emailIsValid, setEmailIsValid] = useState();\n  // const [enteredPassword, setEnteredPassword] = useState(\"\");\n  // const [passwordIsValid, setPasswordIsValid] = useState();\n  const [formIsValid, setFormIsValid] = useState(false);\n\n  const [emailState, dispatchEmail] = useReducer(emailReducer, {\n    value: \"\",\n    isValid: null,\n  });\n  const [passwordState, dispatchPassword] = useReducer(passwordReducer, {\n    value: \"\",\n    isValid: null,\n  });\n\n  // object disctructuring, extracting is valid state and storing it as aliases\n  const { isValid: emailIsValid } = emailState;\n  const { isValid: passwordIsValid } = passwordState;\n\n  const authCtx = useContext(AuthContext);\n  const emailInputRef = useRef();\n  const passwordInputRef = useRef();\n\n  useEffect(() => {\n    const identifier = setTimeout(() => {\n      console.log(\"Checking form validity\");\n      setFormIsValid(emailIsValid && passwordIsValid);\n    }, 500);\n\n    // something that is called cleanup function, useEffect above is running everytime something is changed in email and password field, so instead of sending bunch of http requests for example, we will send one after a while\n    return () => {\n      console.log(\"CLEANUP\");\n      clearTimeout(identifier);\n    };\n  }, [emailIsValid, passwordIsValid]); //useEffect will run only if those dependecies in the square brackets are changed, if no dependecies, it will run only first time when the app is reloaded\n\n  const emailChangeHandler = (event) => {\n    dispatchEmail({ type: \"USER_INPUT\", val: event.target.value });\n    // setFormIsValid(event.target.value.includes(\"@\") && passwordState.isValid);\n  };\n\n  const passwordChangeHandler = (event) => {\n    dispatchPassword({ type: \"USER_INPUT\", val: event.target.value });\n\n    // setFormIsValid(emailState.isValid && passwordState.isValid);\n  };\n\n  const validateEmailHandler = () => {\n    dispatchEmail({ type: \"INPUT_BLUR\" });\n  };\n\n  const validatePasswordHandler = () => {\n    dispatchPassword({ type: \"INPUT_BLUR\" });\n  };\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n    if (formIsValid) {\n      authCtx.onLogin(emailState.value, passwordState.value);\n    } else if (!emailIsValid) {\n      emailInputRef.current.focus();\n    } else {\n      passwordInputRef.current.focus();\n    }\n  };\n\n  return (\n    <Card className={classes.login}>\n      <form onSubmit={submitHandler}>\n        <Input\n          ref={emailInputRef}\n          id=\"email\"\n          label=\"E-Mail\"\n          type=\"email\"\n          isValid={emailIsValid}\n          value={emailState.value}\n          onChange={emailChangeHandler}\n          onBlur={validateEmailHandler}\n        />\n        <Input\n          ref={passwordInputRef}\n          id=\"password\"\n          label=\"Password\"\n          type=\"password\"\n          isValid={passwordIsValid}\n          value={passwordState.value}\n          onChange={passwordChangeHandler}\n          onBlur={validatePasswordHandler}\n        />\n        <div className={classes.actions}>\n          <Button type=\"submit\" className={classes.btn}>\n            Login\n          </Button>\n        </div>\n      </form>\n    </Card>\n  );\n};\n\nexport default Login;\n","import React, { useContext } from \"react\";\n\nimport Card from \"../UI/Card/Card\";\nimport classes from \"./Home.module.css\";\nimport AuthContext from \"../../store/auth-context\";\nimport Button from \"../UI/Button/Button\";\n\nconst Home = (props) => {\n  const authCtx = useContext(AuthContext);\n\n  return (\n    <Card className={classes.home}>\n      <h1>Welcome back!</h1>\n      <Button onClick={authCtx.onLogout}>Logout</Button>\n    </Card>\n  );\n};\n\nexport default Home;\n","import React, { useContext } from \"react\";\n\nimport classes from \"./Navigation.module.css\";\nimport AuthContext from \"../../store/auth-context\";\n\nconst Navigation = (props) => {\n  const ctx = useContext(AuthContext);\n  return (\n    <nav className={classes.nav}>\n      <ul>\n        {ctx.isLoggedIn && (\n          <li>\n            <a href=\"/\">Users</a>\n          </li>\n        )}\n        {ctx.isLoggedIn && (\n          <li>\n            <a href=\"/\">Admin</a>\n          </li>\n        )}\n        {ctx.isLoggedIn && (\n          <li>\n            <button onClick={ctx.onLogout}>Logout</button>\n          </li>\n        )}\n      </ul>\n    </nav>\n  );\n};\n\nexport default Navigation;\n","import React from \"react\";\n\nimport Navigation from \"./Navigation\";\nimport classes from \"./MainHeader.module.css\";\n\nconst MainHeader = (props) => {\n  return (\n    <header className={classes[\"main-header\"]}>\n      <h1>A Typical Page</h1>\n      <Navigation />\n    </header>\n  );\n};\n\nexport default MainHeader;\n","import React, { useContext } from \"react\";\n\nimport Login from \"./components/Login/Login\";\nimport Home from \"./components/Home/Home\";\nimport MainHeader from \"./components/MainHeader/MainHeader\";\nimport AuthContext from \"./store/auth-context\";\n\nfunction App() {\n  const ctx = useContext(AuthContext);\n  return (\n    <React.Fragment>\n      <MainHeader />\n      <main>\n        {!ctx.isLoggedIn && <Login />}\n        {ctx.isLoggedIn && <Home />}\n      </main>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport { AuthContextProvider } from \"./store/auth-context\";\n\nimport \"./index.css\";\nimport App from \"./App\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(\n  <AuthContextProvider>\n    <App />\n  </AuthContextProvider>\n);\n"],"sourceRoot":""}